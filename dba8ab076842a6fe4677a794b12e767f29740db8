{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "115aef42_414daa2c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1000350
      },
      "writtenOn": "2024-10-25T13:26:17Z",
      "side": 1,
      "message": "do we have corresponding bmcweb commit to support redfish configurations?",
      "revId": "dba8ab076842a6fe4677a794b12e767f29740db8",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "61276ad3_423d36db",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1002219
      },
      "writtenOn": "2024-10-25T17:43:26Z",
      "side": 1,
      "message": "There is a change in progress which relies on this one https://gerrit.openbmc.org/c/openbmc/bmcweb/+/75372. Thanks for pointing this out, I\u0027ve mentioned it in the change message as well.",
      "parentUuid": "115aef42_414daa2c",
      "revId": "dba8ab076842a6fe4677a794b12e767f29740db8",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "58ec53ed_f91c2e6d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1000350
      },
      "writtenOn": "2024-11-09T17:48:15Z",
      "side": 1,
      "message": "Thank you",
      "parentUuid": "61276ad3_423d36db",
      "revId": "dba8ab076842a6fe4677a794b12e767f29740db8",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "29352316_079a40b5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 30,
      "author": {
        "id": 1000350
      },
      "writtenOn": "2024-10-25T13:26:17Z",
      "side": 1,
      "message": "what happens if date of the system changes after configuring?\nbasically we need to make sure date and time correct before User password expiration configured?",
      "revId": "dba8ab076842a6fe4677a794b12e767f29740db8",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "704b09c1_7475b572",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 30,
      "author": {
        "id": 1002219
      },
      "writtenOn": "2024-10-25T17:43:26Z",
      "side": 1,
      "message": "Could you please elaborate more on this? Because I do not understand what can be done or should be done in case if system time changes after password expiration has been set.\nSo far, there is a check in the code verifying that we do not set password expiration to a time point in the past. It is mentioned in steps 5 and 8 in \u0027Tested\u0027 section. Also, it is implemented in unit-tests as well.",
      "parentUuid": "29352316_079a40b5",
      "revId": "dba8ab076842a6fe4677a794b12e767f29740db8",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dcf2be57_437e029e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 30,
      "author": {
        "id": 1000350
      },
      "writtenOn": "2024-11-09T17:48:15Z",
      "side": 1,
      "message": "ok, I mean suppose system has old time while configuring password expiration and then user set correct time.",
      "parentUuid": "704b09c1_7475b572",
      "revId": "dba8ab076842a6fe4677a794b12e767f29740db8",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "36bef035_0076ac21",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 30,
      "author": {
        "id": 1002219
      },
      "writtenOn": "2024-12-04T12:10:35Z",
      "side": 1,
      "message": "I still might be not following you. So let me provide an example:\n1. a user is created today (4th of Dec)\n2. password expiration time for the user is set to the 5th of Dec\n3. time inside BMC is switched to the 6th of Dec\n4. now the password is expired \n\nIt seems to be correct. Do you see a problem here?",
      "parentUuid": "dcf2be57_437e029e",
      "revId": "dba8ab076842a6fe4677a794b12e767f29740db8",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "951e27aa_3c0b26c7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 30,
      "author": {
        "id": 1000350
      },
      "writtenOn": "2024-12-10T17:08:38Z",
      "side": 1,
      "message": "this case is ok. but what if system has old date and time ex: 1971 jan 01\npassword expiration does not work as expected right?",
      "parentUuid": "36bef035_0076ac21",
      "revId": "dba8ab076842a6fe4677a794b12e767f29740db8",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "70df7a76_ad395757",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 30,
      "author": {
        "id": 1002219
      },
      "writtenOn": "2024-12-12T11:01:58Z",
      "side": 1,
      "message": "I see your point now. Lets see what I\u0027ve checked so far:\n1. disable ntp in BMC: ```timedatectl set-ntp 0```\n2. set date-time to the past: ```date -s \u00271971-01-01 11:30:30\u0027``, ```hwclock --systohc```\n3. create new user with a password expiration set to \u0027Wednesday, October 7, 2026 10:10:15 AM UTC\u0027: ```busctl call xyz.openbmc_project.User.Manager /xyz/openbmc_project/user xyz.openbmc_project.User.Manager CreateUser2 sassbt \"user1\" 1 \"redfish\" \"priv-admin\" true 1791367815```\n4. check user info via ```chage```: ```chage -l user1```\n```Last password change\t\t\t\t\t: Jan 01, 1971\nPassword expires\t\t\t\t\t: never\nPassword inactive\t\t\t\t\t: never\nAccount expires\t\t\t\t\t\t: never\nMinimum number of days between password change\t\t: 0\nMaximum number of days between password change\t\t: 20368\nNumber of days of warning before password expires\t: 7```\n5. verify that user is able to login to BMC via ssh\n6. change date-time to the current time: ```date -s \u00272024-12-12 11:30:30\u0027``, ```hwclock --systohc```\n7. verify that user is able to login to BMC via ssh\n8. ```chage``` starts to report incorrect information about password expiration here because of its internal code: ```chage -l user1```\n```Last password change\t\t\t\t\t: Jan 01, 1971\nPassword expires\t\t\t\t\t: never\nPassword inactive\t\t\t\t\t: never\nAccount expires\t\t\t\t\t\t: never\nMinimum number of days between password change\t\t: 0\nMaximum number of days between password change\t\t: 20368\nNumber of days of warning before password expires\t: 7```\n9. change date-time to the future: ```date -s \u00272027-12-12 11:30:30\u0027```, ```hwclock --systohc```\n10. verify that password is expired, user is not able to login via ssh and gets error ```You are required to change your password immediately (password expired).```\n11. ```chage``` still reports wrong information about password expiration: ```chage -l user1```\n```Last password change\t\t\t\t\t: Jan 01, 1971\nPassword expires\t\t\t\t\t: never\nPassword inactive\t\t\t\t\t: never\nAccount expires\t\t\t\t\t\t: never\nMinimum number of days between password change\t\t: 0\nMaximum number of days between password change\t\t: 20368\nNumber of days of warning before password expires\t: 7```\n\nWeak place here is a date of the last password change, if password changes, then it shifts, so password expiration date-time shifts to the future as well, because ```chage``` operates on number of days since the last password change. Unfortunately, password expiration does not work in this case.",
      "parentUuid": "951e27aa_3c0b26c7",
      "revId": "dba8ab076842a6fe4677a794b12e767f29740db8",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7646c986_35800967",
        "filename": "user_mgr.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1569,
      "author": {
        "id": 1000350
      },
      "writtenOn": "2024-10-25T13:52:26Z",
      "side": 1,
      "message": "linux passwd command also can be used for setting Password Expiration",
      "revId": "dba8ab076842a6fe4677a794b12e767f29740db8",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ac04ce81_fef8e74a",
        "filename": "user_mgr.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1569,
      "author": {
        "id": 1002219
      },
      "writtenOn": "2024-10-25T17:43:26Z",
      "side": 1,
      "message": "I do not know if there is any advantage of using passwd over chage. Unfortunately, I do not know it for sure, hence if there is such an advantage, I can switch to passwd. Could you please explain if it is better to use passwd instead of chage?",
      "parentUuid": "7646c986_35800967",
      "revId": "dba8ab076842a6fe4677a794b12e767f29740db8",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "662304ca_bf0a9676",
        "filename": "user_mgr.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1569,
      "author": {
        "id": 1000350
      },
      "writtenOn": "2024-11-09T17:48:15Z",
      "side": 1,
      "message": "looks like passwd tool has limited, while chage supports password expiration policy",
      "parentUuid": "ac04ce81_fef8e74a",
      "revId": "dba8ab076842a6fe4677a794b12e767f29740db8",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}